# Neotest 快捷鍵速查表

## 🎯 快速開始

```
1. <leader>ts  → 打開測試摘要窗口
2. j/k         → 瀏覽測試
3. <CR>        → 跳轉到測試 ⭐
4. r           → 運行測試
5. i           → 查看輸出
```

## ⌨️ 全局快捷鍵（任何窗口）

| 快捷鍵 | 功能 | 說明 |
|--------|------|------|
| `<leader>ts` | 測試摘要 | 打開/關閉測試摘要窗口 |
| `<leader>tt` | 運行文件 | 運行當前文件所有測試 ⭐ 推薦 |
| `<leader>tr` | 運行最近 | 運行光標下的測試（需在測試函數內） |
| `<leader>tT` | 運行所有 | 運行整個項目所有測試 |
| `<leader>tl` | 重新運行 | 重新運行上次的測試 |
| `<leader>to` | 顯示輸出 | 顯示測試輸出窗口 |
| `<leader>tO` | 輸出面板 | 切換輸出面板 |
| `<leader>td` | 調試最近 | 調試最近的測試 |
| `<leader>tD` | 調試上次 | 調試上次的測試 |
| `<leader>tS` | 停止 | 停止運行中的測試 |
| `<leader>tw` | 監視 | 切換測試監視模式 |

## 📊 測試摘要窗口快捷鍵

**在測試摘要窗口內按這些鍵**:

| 按鍵 | 功能 | 說明 |
|------|------|------|
| `<CR>` | **跳轉** | **打開文件並跳轉到該測試位置** ⭐⭐⭐ |
| `r` | 運行 | 運行選中的測試或測試組 |
| `d` | 調試 | 調試選中的測試 |
| `i` | 輸出 | 顯示測試輸出 |
| `o` | 展開/折疊 | 展開或折疊測試節點 |
| `s` | 停止 | 停止運行中的測試 |
| `m` | 標記 | 標記測試 |
| `t` | 目標 | 設置為目標 |
| `q` | 關閉 | 關閉測試摘要窗口 |
| `j/k` | 移動 | 上下移動光標 |
| `h/l` | 折疊/展開 | 折疊/展開當前節點 |

## 🔄 工作流程

### 方式 1: 使用測試摘要（推薦）⭐

```
1. <leader>ts           打開測試摘要
   
2. j/k                  瀏覽到想要的測試
   
3. <CR>                 跳轉到測試位置
                        （自動打開文件並定位）
   
4. 在文件中查看/編輯
   
5. <leader>tt           運行所有測試
   或
   <leader>tr           運行當前測試
   
6. <leader>ts           返回摘要查看結果
```

### 方式 2: 直接在文件中操作

```
1. 打開測試文件
   vim main_test.go
   
2. <leader>tt           運行當前文件所有測試
   或
   將光標移到測試函數內
   <leader>tr           運行該測試
   
3. <leader>to           查看輸出
   
4. <leader>ts           查看整體摘要
```

## �� 測試摘要窗口示例

```
  📦 myproject                  ← 項目根
  │
  ├─ ✓ handlers/               ← 目錄
  │  └─ ✓ user_test.go         ← 測試文件
  │     ├─ ✓ TestCreateUser    ← 測試函數（通過）
  │     ├─ ✗ TestUpdateUser    ← 測試函數（失敗）
  │     └─ ✓ TestDeleteUser    ← 測試函數（通過）
  │
  └─ ✓ main_test.go
     ├─ ✓ TestAdd
     └─ ✓ TestSubtract

操作示例:
  光標在 TestUpdateUser 上
  → 按 <CR>    : 跳轉到該測試
  → 按 r       : 運行該測試
  → 按 i       : 查看失敗原因
  → 按 d       : 調試該測試
```

## 🎨 視覺標記

| 符號 | 意義 |
|------|------|
| ✓ | 測試通過（綠色） |
| ✗ | 測試失敗（紅色） |
| ⚠ | 測試跳過（黃色） |
| ◐ | 測試運行中 |
| 📦 | 命名空間/包 |
| 📄 | 測試文件 |
| 🔧 | 測試函數 |

## 💡 實用技巧

### 1. 快速跳轉到失敗的測試
```
<leader>ts       打開摘要
j/k              找到紅色 ✗ 的測試
<CR>             跳轉過去修復
```

### 2. 只運行失敗的測試
```
在摘要窗口中:
移動到失敗的測試
按 r             只運行這個測試
```

### 3. 查看詳細錯誤信息
```
在摘要窗口中:
移動到失敗的測試
按 i             查看完整輸出
```

### 4. 快速重新運行
```
<leader>tl       重新運行上次的測試
                 無需記住運行了什麼
```

### 5. 監視模式（自動重新運行）
```
<leader>tw       開啟監視
                 修改文件後自動重新運行測試
<leader>tw       關閉監視
```

## ❓ 常見問題

### Q: 按 `<leader>tr` 說 "no test"？
**A**: 
1. 確保光標在測試函數內
2. 或使用 `<leader>tt` 運行整個文件
3. 或在摘要窗口按 `r`

### Q: 測試沒有出現在摘要中？
**A**: 
1. 確認文件名是 `*_test.go`
2. 確認函數是 `func TestXxx(t *testing.T)`
3. 按 `o` 展開節點查看

### Q: 如何只看某個目錄的測試？
**A**: 
1. 在摘要窗口移動到該目錄
2. 按 `o` 展開
3. 其他目錄按 `o` 折疊

### Q: 如何同時看測試代碼和摘要？
**A**:
1. `<leader>ts` 打開摘要（通常在右側）
2. 左側就是你的代碼
3. 在摘要按 `<CR>` 左側會跳到對應代碼

## �� 相關文檔

- [TEST_GUIDE.md](TEST_GUIDE.md) - 完整測試指南
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - 疑難排解
- `:help neotest` - Neotest 幫助文檔

---

**記住最重要的三個鍵**:
1. `<leader>ts` - 打開測試摘要
2. `<CR>` - 跳轉到測試（在摘要窗口中）
3. `r` - 運行測試（在摘要窗口中）
